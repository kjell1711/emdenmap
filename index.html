<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GTA Map</title>

<style>
body{
    margin:0;
    background:#0a0a0a;
    overflow:hidden;
    font-family:Arial, sans-serif;
}

#mapContainer{
    width:100vw;
    height:100vh;
    position:relative;
    overflow:hidden;
    cursor:grab;
}

#mapImage{
    position:absolute;
    transform-origin:0 0;
    user-select:none;
    pointer-events:none;
}

.marker{
    position:absolute;
    width:30px;
    height:30px;
    border-radius:50%;
    background:white;
    color:black;
    font-weight:bold;
    display:flex;
    align-items:center;
    justify-content:center;
    transform:translate(-50%, -100%);
    cursor:pointer;
    box-shadow:0 0 12px black;
}

.marker:hover{
    background:#00ff99;
}

#infoBox{
    position:absolute;
    right:20px;
    top:20px;
    background:#111;
    padding:15px;
    border-radius:8px;
    width:220px;
    border:1px solid #222;
    color:white;
}
</style>
</head>
<body>

<div id="mapContainer">
    <!-- HIER KOMMT DEIN BILD REIN -->
    <img id="mapImage" src="map.png">
</div>

<div id="infoBox">
    <b>Gebäude Info</b>
    <div id="infoContent">Klicke auf eine Nummer</div>
</div>

<script>

const map = document.getElementById("mapImage");
const container = document.getElementById("mapContainer");
const infoContent = document.getElementById("infoContent");

let scale = 1;
let originX = 0;
let originY = 0;
let isDragging = false;
let startX, startY;
let markerId = 0;
let markers = [];

function update(){
    map.style.transform =
        `translate(${originX}px, ${originY}px) scale(${scale})`;

    markers.forEach(m=>{
        m.el.style.left =
            (originX + m.x * scale) + "px";
        m.el.style.top =
            (originY + m.y * scale) + "px";
    });
}

container.addEventListener("wheel", e=>{
    e.preventDefault();
    const zoom = e.deltaY < 0 ? 1.1 : 0.9;
    scale *= zoom;
    scale = Math.max(0.5, Math.min(4, scale));
    update();
});

container.addEventListener("mousedown", e=>{
    isDragging = true;
    startX = e.clientX - originX;
    startY = e.clientY - originY;
});

window.addEventListener("mousemove", e=>{
    if(!isDragging) return;
    originX = e.clientX - startX;
    originY = e.clientY - startY;
    update();
});

window.addEventListener("mouseup", ()=>{
    isDragging = false;
});

container.addEventListener("click", e=>{
    if(e.target !== container) return;

    const rect = map.getBoundingClientRect();
    const x = (e.clientX - rect.left) / scale;
    const y = (e.clientY - rect.top) / scale;

    markerId++;
    createMarker(x,y,"Gebäude");
});

function createMarker(x,y,name){
    const div = document.createElement("div");
    div.className = "marker";
    div.innerText = markerId;

    container.appendChild(div);

    const markerObj = {id:markerId, x,y,name, el:div};
    markers.push(markerObj);

    div.onclick = (e)=>{
        e.stopPropagation();
        infoContent.innerHTML = `
            <b>${name}</b><br>
            PLZ: ${markerObj.id}
        `;
    };

    update();
}

</script>
</body>
</html>
